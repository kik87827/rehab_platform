<!DOCTYPE html>
<html lang="ko"><head>
    <meta http-equiv="Content-Type" content="text/html;  charset=utf-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head><body style="overflow-x: hidden;" class="body"><sec:csrfmetatags>
    


 <!-- Favicons -->
<link href="./assets/img/favicon.png" rel="icon">
<link href="./assets/img/apple-touch-icon.png" rel="apple-touch-icon">

<!-- Google Fonts -->
<link href="https://fonts.gstatic.com" rel="preconnect">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

<!-- Vendor CSS Files -->
<link href="./assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="./assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
<link href="./assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
<link href="./assets/vendor/quill/quill.snow.css" rel="stylesheet">
<link href="./assets/vendor/quill/quill.bubble.css" rel="stylesheet">
<link href="./assets/vendor/remixicon/remixicon.css" rel="stylesheet">
<link href="./assets/vendor/simple-datatables/style.css" rel="stylesheet">

<!-- Template Main CSS File -->
<link href="./assets/css/style.css" rel="stylesheet">

<!-- =======================================================
* Template Name: NiceAdmin - v2.2.2
* Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
* Author: BootstrapMade.com
* License: https://bootstrapmade.com/license/
======================================================== -->

<!-- Vendor JS Files -->
<script src="./assets/vendor/apexcharts/apexcharts.min.js"></script>
<script src="./assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="./assets/vendor/chart.js/chart.min.js"></script>
<script src="./assets/vendor/echarts/echarts.min.js"></script>
<script src="./assets/vendor/quill/quill.min.js"></script>
<script src="./assets/vendor/simple-datatables/simple-datatables.js"></script>
<script src="./assets/vendor/tinymce/tinymce.min.js"></script>
<script src="./assets/vendor/php-email-form/validate.js"></script>

<!-- Template Main JS File -->
<script src="./assets/js/main.js"></script>

<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>

    <title>Rehab</title>


<!-- ======================
header
======================= -->




<script>	
$(document).on("click", ".toggle-sidebar-btn", function(){
    if($(".body").hasClass("toggle-sidebar")){
        $(".body").removeClass("toggle-sidebar");
    }else{
        $(".body").addClass("toggle-sidebar");
    }
    
});
</script>

<header id="header" class="header fixed-top d-flex align-items-center">

<div class="d-flex align-items-center justify-content-between">
  <a href="mainPage.do" class="logo d-flex align-items-center">
    <img src="./assets/img/logo.png" alt="">
    <span class="d-none d-lg-block">Rehab Platform</span>
  </a>
  <i class="bi bi-list toggle-sidebar-btn"></i>
</div><!-- End Logo -->

<div class="search-bar">
  <form class="search-form d-flex align-items-center" method="POST" action="#">
    <input type="text" name="query" placeholder="Search" title="Enter search keyword">
    <button type="submit" title="Search"><i class="bi bi-search"></i></button>
  </form>
</div><!-- End Search Bar -->

<nav class="header-nav ms-auto">
  <ul class="d-flex align-items-center">

    <li class="nav-item d-block d-lg-none">
      <a class="nav-link nav-icon search-bar-toggle " href="#">
        <i class="bi bi-search"></i>
      </a>
    </li><!-- End Search Icon-->

    <li class="nav-item dropdown">

      <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
        <i class="bi bi-bell"></i>
        <span class="badge bg-primary badge-number">4</span>
      </a><!-- End Notification Icon -->

      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
        <li class="dropdown-header">
          You have 4 new notifications
          <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="notification-item">
          <i class="bi bi-exclamation-circle text-warning"></i>
          <div>
            <h4>Lorem Ipsum</h4>
            <p>Quae dolorem earum veritatis oditseno</p>
            <p>30 min. ago</p>
          </div>
        </li>

        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="notification-item">
          <i class="bi bi-x-circle text-danger"></i>
          <div>
            <h4>Atque rerum nesciunt</h4>
            <p>Quae dolorem earum veritatis oditseno</p>
            <p>1 hr. ago</p>
          </div>
        </li>

        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="notification-item">
          <i class="bi bi-check-circle text-success"></i>
          <div>
            <h4>Sit rerum fuga</h4>
            <p>Quae dolorem earum veritatis oditseno</p>
            <p>2 hrs. ago</p>
          </div>
        </li>

        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="notification-item">
          <i class="bi bi-info-circle text-primary"></i>
          <div>
            <h4>Dicta reprehenderit</h4>
            <p>Quae dolorem earum veritatis oditseno</p>
            <p>4 hrs. ago</p>
          </div>
        </li>

        <li>
          <hr class="dropdown-divider">
        </li>
        <li class="dropdown-footer">
          <a href="#">Show all notifications</a>
        </li>

      </ul><!-- End Notification Dropdown Items -->

    </li><!-- End Notification Nav -->

    <li class="nav-item dropdown">

      <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
        <i class="bi bi-chat-left-text"></i>
        <span class="badge bg-success badge-number">3</span>
      </a><!-- End Messages Icon -->

      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages">
        <li class="dropdown-header">
          You have 3 new messages
          <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="message-item">
          <a href="#">
            <img src="./assets/img/messages-1.jpg" alt="" class="rounded-circle">
            <div>
              <h4>Maria Hudson</h4>
              <p>Velit asperiores et ducimus soluta repudiandae labore officia est ut...</p>
              <p>4 hrs. ago</p>
            </div>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="message-item">
          <a href="#">
            <img src="./assets/img/messages-2.jpg" alt="" class="rounded-circle">
            <div>
              <h4>Anna Nelson</h4>
              <p>Velit asperiores et ducimus soluta repudiandae labore officia est ut...</p>
              <p>6 hrs. ago</p>
            </div>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="message-item">
          <a href="#">
            <img src="./assets/img/messages-3.jpg" alt="" class="rounded-circle">
            <div>
              <h4>David Muldon</h4>
              <p>Velit asperiores et ducimus soluta repudiandae labore officia est ut...</p>
              <p>8 hrs. ago</p>
            </div>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li class="dropdown-footer">
          <a href="#">Show all messages</a>
        </li>

      </ul><!-- End Messages Dropdown Items -->

    </li><!-- End Messages Nav -->

    <li class="nav-item dropdown pe-3">

      <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
        <img src="./assets/img/profile-img.jpg" alt="Profile" class="rounded-circle">
        <span class="d-none d-md-block dropdown-toggle ps-2">SangWon Kim</span>
      </a><!-- End Profile Iamge Icon -->

      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
        <li class="dropdown-header">
          <h6>SangWon Kim</h6>
          <span>Web Programer</span>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
            <i class="bi bi-person"></i>
            <span>My Profile</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
            <i class="bi bi-gear"></i>
            <span>Account Settings</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
            <i class="bi bi-question-circle"></i>
            <span>Need Help?</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="#">
            <i class="bi bi-box-arrow-right"></i>
            <span><button type="button" onclick="location.href='/cmm/join/login.do'" style="border:none; background-color: white;">Sign Out</button></span>
          </a>
        </li>

      </ul><!-- End Profile Dropdown Items -->
    </li><!-- End Profile Nav -->

  </ul>
</nav><!-- End Icons Navigation -->

</header><!-- End Header -->


<!-- ======================
END header
======================= -->

<div id="layout" class="on"> 
    <!-- side menu -->
    <div id="sideMenu">
        <div style="position: fixed;">
            



<!-- <script>
function subMenu(){
    
    $(".nav-item >a").addClass("collapsed");
    $(this).parent().parent().parent().find("a").removeClass("collapsed");
    $(this).addClass("active");
}


</script> -->

<aside id="sidebar" class="sidebar">

<ul class="sidebar-nav" id="sidebar-nav">
  <li class="nav-heading">Dash board</li>

  <li class="nav-item">
    <a class="nav-link " href="mainPage.do">
      <i class="bi bi-grid"></i>
      <span>종합현황</span>
    </a>
  </li><!-- End Dashboard Nav -->
    
  <li class="nav-heading">Analysis</li>
      
  <li class="nav-item">
      <a class="nav-link dataSch collapsed" href="dataSch.do">
          <i class="bi bi-menu-button-wide"></i>
          <span>데이터 검색</span>
      </a>
  </li>
  
  <li class="nav-item">
      <a class="nav-link detailStatis collapsed" href="detailStatis.do">
          <i class="bi bi-bar-chart"></i>
          <span>상세 통계</span>
      </a>
  </li>
  
  <li class="nav-item">
       <a class="nav-link userAnalysis collapsed" href="userAnalysis.do">
      <!-- <a class="nav-link userAnalysis collapsed" href="#"> -->
          <i class="bi bi-layout-text-window-reverse"></i>
          <span>사용자 통계</span>
      </a>
  </li>

 <!--  <li class="nav-heading">Pages</li>

  <li class="nav-item">
    <a class="nav-link collapsed" href="#">
      <i class="bi bi-person"></i>
      <span>Profile</span>
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link collapsed" href="#">
      <i class="bi bi-question-circle"></i>
      <span>F.A.Q</span>
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link collapsed" href="#">
      <i class="bi bi-envelope"></i>
      <span>Contact</span>
    </a>
  </li> -->

  <!-- <li class="nav-item">
    <a class="nav-link collapsed" href="pages-register.html">
      <i class="bi bi-card-list"></i>
      <span>Register</span>
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link collapsed" href="pages-login.html">
      <i class="bi bi-box-arrow-in-right"></i>
      <span>Login</span>
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link collapsed" href="pages-error-404.html">
      <i class="bi bi-dash-circle"></i>
      <span>Error 404</span>
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link collapsed" href="pages-blank.html">
      <i class="bi bi-file-earmark"></i>
      <span>Blank</span>
    </a>
  </li> -->

</ul>

</aside><!-- End Sidebar-->

<!-- <div class="openCon"><button type="button" class="sideMenuOpen">O<br>P<br>E<br>N</button></div> -->


        </div>
    </div>
    <!-- END  side menu -->

    <div>
        





<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">

<!-- <title>Tables / Data - NiceAdmin Bootstrap Template</title> -->
<meta content="" name="description">
<meta content="" name="keywords">



<style>
h5{
font-weight:bold;
font-size:15pt;
}

h7{
font-weight:bold;
font-size:18px;
text-align:center;
margin-bottom:20px;
margin-top:20px;
}

.tableBtn{
margin-top:20px;
}

.viewcsv{
max-height:500px;
overflow-y:auto; 
overflow-x:auto;"
}

.nextStep4{
margin-bottom:20px;
}

.reset{
margin-top:20px;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript">	
var myChart;
var chartFlag = false;
var xArr = [];
var yArr = [];
var xcol = "";
var ycol = "";
var chartType = "";	
var RGB_1 = "";
var RGB_2 = "";
var RGB_3 = "";
var strRGBA = "";
var background = [];
var border = [];

$(document).ready(function(){
                                
});	

$(document).on("change", ".file-input", function(){
    
    reset();
    var filename = $(this).val();
    
    if(filename == ""){
        filename = "파일을 선택해주세요.";
    }		  
    
    var files = $("#file")[0].files;
    
    if(files != ""){
        if(!files[0].name.match(/(.csv)$/)){
            alert("데이터는 CSV 파일만 등록 가능합니다.");
            $(this).val("");
            return;
        }
        $(".uploadname").html(files[0].name);
    }
   
   var csvFileName = files[0].name;
   var header = "";
   $.ajax({
      url : "/files/"+csvFileName,
      dataType : "text",
      success : function(data){
          var allRows = data.split(/\r?\n|\r/);
          var table = "<table class='table table-striped' style='width:100%;'>";
          var tableBtn = "";
          var step3Card = "";    		  
          for(var singleRow = 0; singleRow < allRows.length; singleRow++){		  
              if(singleRow == 0){
                  table += "<thead style='text-align: center; border:none;'>";
                  table += "<tr>";
              }else{
                  table += "<tr>";
              }
              
              var rowCells = allRows[singleRow].split(",");
              
              if(singleRow == 0){
                  header = allRows[0].split(",");
              }
              
              for(var rowCell = 0; rowCell < rowCells.length; rowCell++){
                                       
                  if(singleRow == 0){
                      table += "<th class='"+header[rowCell]+""+singleRow+" "+header[rowCell]+"'>";
                      table += rowCells[rowCell];
                      table += "</th>";
                      
                      var param = header[rowCell];
                      step3Card += "<div class='alert alert-primary alert-dismissible fade show' role='alert' style='width:400px;'>";
                      step3Card += "<span class='"+header[rowCell]+" "+header[rowCell]+"'>"+header[rowCell]+"</span>";
                      step3Card += "<button type='button' class='btn btn-light rounded-pill' style='float:right;' onclick=\"yaxis('"+header[rowCell]+"');\">Y축</button>";
                      step3Card += "<button type='button' class='btn btn-light rounded-pill' style='float:right;' onclick=\"xaxis('"+header[rowCell]+"');\">X축</button>";
                      step3Card += "</div>";       					  
                  }else{
                      
                      table += "<td class='"+header[rowCell]+""+singleRow+" "+header[rowCell]+"'>";
                      table += rowCells[rowCell];
                      table += "</td>";
                  }
              }
              
              if(singleRow == 0){
                  table += "</tr>";
                  table += "</thead>";
                  table += "<tbody id='tableBody' style='text-align: center;'>";
              }else{
                  table += "</tr>";
              }
          }
          
          table += "</tbody>";
          table += "</table>";
          
          tableBtn += "<button type='submit' class='btn btn-primary nextStep2' onclick='nextStep2();'>차트 선택</button>";
          
          
          $(".viewcsv").append(table);
          $(".tableBtn").append(tableBtn);
          $(".columnList").append(step3Card);
      }
   }); 
});

function nextStep2(){
    $(".step2").css({
        "display" : "block"
    });	
}

function choiceChart(type){
    myChart;
    $(".step3").css({
        "display" : "block"
    });
    /* $(".chartBtn").css({
        "display" : "none"
    }); */
    chartType = type;
    $(".step3").focus();
}	

function xaxis(header){		
    var xaxisLen = $(".xaxis").find("div").length;
    if(xaxisLen == 1){
        alert("X축에 들어갈 목록을 하나만 선택해주세요.");
        return;
    }
    xcol = header;
    var xaxisCard = "";
    
    xaxisCard += "<div class='alert alert-primary alert-dismissible fade show' role='alert' style='width:400px;'>";
    xaxisCard += "<span class='"+header+"'>"+header+"</span>";
    xaxisCard += "<button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>";
    xaxisCard += "</div>";
    
    $(".xaxis").append(xaxisCard);
}	

function yaxis(header){	
    var yaxisLen = $(".yaxis").find("div").length;
    if(yaxisLen == 1){
        alert("Y축에 들어갈 목록을 하나만 선택해주세요.");
        return;
    }
    ycol = header;
    var yaxisCard = "";		
    
    yaxisCard += "<div class='alert alert-primary alert-dismissible fade show' role='alert' style='width:400px;'>";
    yaxisCard += "<span class='"+header+"'>"+header+"</span>";
    yaxisCard += "<button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>";
    yaxisCard += "</div>";
    
    $(".yaxis").append(yaxisCard);
}

</script>


<main id="main" class="main">

<div class="pagetitle">
<h1>사용자 통계</h1>    
</div><!-- End Page Title -->

<section class="section">  
<div class="row" style="margin-top:30px;">  
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">  
            <h5 class="card-title">▣ CSV 파일 등록</h5> 
                <div class="dataSelect" style="margin-top:20px;">
                <span class="uploadname">첨부된 파일이 없습니다.</span>					
                    <label class="upload-label" for="file">
                      <input type="file" name="file" id="file" class="file-input">
                    </label>
                </div>
                
                <div class="viewcsv">
                    
                </div>
                <div class="text-center tableBtn">
                </div>
                
            </div>
        </div>
    </div>
</div>

<div class="row step2" style="display:none;">  
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">  
            <h5 class="card-title">▣ 차트 선택</h5> 
            
            <div class="card" style="width:30%; float:left;">
                <img src="./assets/img/barChart.JPG" class="card-img-top" alt="..." style="height:300px;">
                <div class="card-body">
                  <h5 class="card-title">막대 차트
                      <button type="submit" class="btn btn-primary chartBtn" onclick="choiceChart('bar');" style="float: right;">선택</button>
                  </h5>
                  <p class="card-text">&nbsp; &gt; 상관관계</p>
                </div>
            </div>
            
            <div class="card" style="width:30%; float:left; margin-left:1.5%;">
                <img src="./assets/img/lineChart.JPG" class="card-img-top" alt="..." style="height:300px;">
                <div class="card-body">
                  <h5 class="card-title">라인 차트
                      <button type="submit" class="btn btn-primary chartBtn" onclick="choiceChart('line');" style="float: right;">선택</button>
                  </h5>
                  <p class="card-text">&nbsp; &gt; 시간율, 상관관계</p>
                </div>
            </div>
            
            <div class="card" style="width:30%; float:left; margin-left:1.5%;">
                <img src="./assets/img/pieChart.JPG" class="card-img-top" alt="..." style="height:300px;">
                <div class="card-body">
                  <h5 class="card-title">파이차트
                      <button type="submit" class="btn btn-primary chartBtn" onclick="choiceChart('pie');" style="float: right;">선택</button>
                  </h5>
                  <p class="card-text">&nbsp; &gt; 분포, 비율</p>
                </div>
            </div>
                                    
            </div>
        </div>
    </div>
</div>

<div class="row step3" style="display:none;">  
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">  
            <h5 class="card-title">▣ 데이터 선택</h5> 
                <div class="col-lg-3" style="float:left; width:32%;">
                    <div class="card">
                        <h7>컬럼 목록</h7>
                        <div class="card-body" style="height:450px; overflow-y:auto;">	            				
                            <div class="columnList" style="margin-top:20px;">				
                            </div>
                        </div>
                    </div>	
                </div>
                <div class="col-lg-3" style="float:left; margin-left:2%; width:32%;">
                    <div class="card">
                        <h7>X축</h7>
                        <div class="card-body">								
                            <div class="xaxis"></div>
                        </div>
                    </div>	
                </div>
                
                <div class="col-lg-3" style="float:left; margin-left:2%; width:32%;">
                    <div class="card">
                        <h7>Y축</h7>
                        <div class="card-body">								
                            <div class="yaxis"></div>
                        </div>
                    </div>	
                </div>								
            </div>
            <div class="text-center">
                 <button type="submit" class="btn btn-primary nextStep4" onclick="nextStep4();">차트 표출</button>
              </div>	
        </div>
    </div>
</div>

<div class="row step4" style="display:none;">  
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">  
            <h5 class="card-title">▣ 차트</h5> 
                <div class="" style="margin-top:20px;">
                    <canvas id="ChartJS" style="max-height: 550px; height:550px;"></canvas>
                    <div class="text-center">
                         <button type="submit" class="btn btn-danger reset" onclick="reset();">전체 초기화</button>
                      </div>	
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>
                    <script>			
                    $(document).ready(function(){
                        const ctx = document.getElementById('ChartJS').getContext('2d');							
                    });			
                    
                    function reset(){
                        $(".uploadname").text("첨부된 파일이 없습니다.");
                        $(".tableBtn").empty();
                        $(".viewcsv").empty();							
                        $(".columnList").empty();
                        $(".xaxis").empty();
                        $(".yaxis").empty();
                        $(".step2").css({
                            "display" : "none"
                        });
                        $(".step3").css({
                            "display" : "none"
                        });
                        $(".step4").css({
                            "display" : "none"
                        });							
                    }
                    
                    function nextStep4(){
                        var xaxis = $(".xaxis").find("div").length;
                        var yaxis = $(".yaxis").find("div").length;
                        
                        if(xaxis==0 || yaxis==0){
                            alert("컬럼 목록에서 컬럼을 선택해 주세요");
                            return;
                        }
                        
                        $(".step4").css({
                            "display" : "block"
                        });
                        
                        var length = $("."+xcol).length;	
                        
                        for(var i=1; i<length; i++){
                            var x = $("."+xcol+i).text();
                            var y = $("."+ycol+i).text();
                            xArr.push(x);
                            yArr.push(y);
                            
                            var rgb_r = Math.floor(Math.random() * (255 + 1));
                            var rgb_g = Math.floor(Math.random() * (255 + 1));
                            var rgb_b = Math.floor(Math.random() * (255 + 1));
                            var background_rgba = "rgba(" + rgb_r + "," + rgb_g + "," + rgb_b + ",0.3)";
                            var border_rgb = "rgb(" + rgb_r + "," + rgb_g + "," + rgb_b + ")";
                            background.push(background_rgba);
                            border.push(border_rgb);
                        }
                        
                        if(chartFlag == false){
                            if(chartType == 'bar'){
                                barChartDrw();
                            }else if(chartType == 'line'){
                                lineChartDrw();
                            }else if(chartType == 'pie'){
                                pieChartDrw();
                            }								
                            chartFlag = true;
                            xArr = [];
                            yArr = [];
                            background = [];
                        }else{
                            myChart.destroy();
                            if(chartType == 'bar'){
                                barChartDrw();
                            }else if(chartType == 'line'){
                                lineChartDrw();
                            }else if(chartType == 'pie'){
                                pieChartDrw();
                            }
                            xArr = [];
                            yArr = [];
                            background = [];
                        }
                        
                    }
                    
                    function barChartDrw(){
                        var ctx = document.getElementById('ChartJS').getContext('2d');
                        var config = {
                                type: 'bar',
                                data: {
                                    labels: xArr,
                                    datasets: [{   
                                        label: false,
                                        fill: false,
                                        data: yArr,
                                        backgroundColor: background,
                                        borderColor: border,
                                        borderWidth: 1
                                        }]
                                    },
                                options: {
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    legend: {
                                        display: false
                                    },
                                    scales: {
                                        yAxes: [{
                                            stacked: false,
                                            scaleLabel: {
                                                display: true,
                                                fontSize: 25,
                                                labelString: ycol
                                            },
                                            ticks: {
                                                  fontColor: 'black',
                                                  fontSize: 20,
                                                  min: 0,
                                                  beginAtZero: true
                                                },
                                        }],
                                          xAxes: [{
                                              stacked: false,
                                              scaleLabel: {
                                                display: true,
                                                fontSize: 25,
                                                labelString: xcol
                                              },
                                              ticks: {
                                                fontColor: 'black',
                                                fontSize: 20,
                                                min: 0
                                              }        
                                            }]	
                                    },
                                    plugins: {
                                        legend:{
                                            display: false
                                        }
                                    }
                                }
                        };
                        myChart = new Chart(ctx, config);						
                    }
                    
                    function lineChartDrw(){
                        var ctx = document.getElementById('ChartJS').getContext('2d');
                        var config = {
                                type: 'line',
                                data: {
                                  labels: xArr,
                                  datasets: [{
                                    label: false,
                                    data: yArr,
                                    fill: false,
                                    borderColor: 'rgb(75, 192, 192)',
                                    tension: 0.1
                                  }]
                                },
                                options: {
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    legend: {
                                        display: false
                                    },
                                    scales: {
                                        yAxes: [{
                                            stacked: false,
                                            scaleLabel: {
                                                display: true,
                                                fontSize: 25,
                                                labelString: ycol
                                            },
                                            ticks: {
                                                  fontColor: 'black',
                                                  fontSize: 20,
                                                  min: 0,
                                                  beginAtZero: true
                                                },
                                        }],
                                          xAxes: [{
                                              stacked: false,
                                              scaleLabel: {
                                                display: true,
                                                fontSize: 25,
                                                labelString: xcol
                                              },
                                              ticks: {
                                                fontColor: 'black',
                                                fontSize: 20,
                                                min: 0
                                              }        
                                            }]	
                                    },
                                    plugins: {
                                        legend:{
                                            display: false
                                        }
                                    }
                                }	
                        };
                        myChart = new Chart(ctx, config);	
                    }
                    
                    function pieChartDrw(){
                        var ctx = document.getElementById('ChartJS').getContext('2d');
                        var config = {
                                type: 'pie',
                                data: {
                                    labels: xArr,
                                      datasets: [{
                                        label: false,
                                        data: yArr,
                                        backgroundColor: background,
                                        hoverOffset: 4
                                      }]
                                },
                                options: {
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    legend: {
                                        position: 'top',
                                        align: 'center',
                                        display: true
                                    }
                                }
                        };
                        myChart = new Chart(ctx, config);	
                    }
                    
                    /* function showChart(type){
                        var diesKnd = $(".diesKnd").val();
              
                        var radio = document.getElementsByName("contact");
                        for(var radio of radio){
                            if(radio.checked){
                                var statisOpt = radio.value;
                                
                            }
                        }			
                        var xAxes = $("input[name=contact]:checked").next().text();
                        var data = {
                            "diesKnd": diesKnd,
                            "statisOpt" : statisOpt
                        };
                        
                        $.ajax({
                            url : "/cmm/rehab/getSearchDataStatis.do",
                            type : "POST",
                            data: data,
                            dataType : "json",
                            success : function(result) {
                                $.each(result, function(i, dataList){
                                    xList.push(dataList.xaxis);
                                    yList.push(dataList.yaxis);								
                                });
                                if(chartFlag == false){
                                    if(type == 'bar'){
                                        barChartDrw(xAxes);
                                    }else if(type == 'line'){
                                        lineChartDrw(xAxes);
                                    }else if(type == 'pie'){
                                        pieChartDrw(xAxes);
                                    }
                                    
                                    chartFlag = true;
                                    xList = [];
                                    yList = [];
                                }else{
                                    myChart.destroy();
                                    if(type == 'bar'){
                                        barChartDrw(xAxes);
                                    }else if(type == 'line'){
                                        lineChartDrw(xAxes);
                                    }else if(type == 'pie'){
                                        pieChartDrw(xAxes);
                                    }
                                    xList = [];
                                    yList = [];
                                }
                                
                                menuActive();
                            }, error : function(request, status, error){
                                alert("code:"+request.status+"\n"+"error:"+error);
                            }
                        });
                    }  */
                    </script>
                </div>
                                    
            </div>
        </div>
    </div>
</div>

</section>

</main><!-- End #main -->
<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>


    </div>

</div>

<!-- ======================
footer
======================= -->

<!-- ======================
END footer
======================= -->



</sec:csrfmetatags><svg id="SvgjsSvg1001" width="2" height="0" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev" style="overflow: hidden; top: -100%; left: -100%; position: absolute; opacity: 0;"><defs id="SvgjsDefs1002"></defs><polyline id="SvgjsPolyline1003" points="0,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg></body></html>